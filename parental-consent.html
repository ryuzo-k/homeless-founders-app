<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parental Consent Form - Homeless Founders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Space Mono', monospace;
            background-color: white;
            color: black;
        }
        .simple-card {
            border: 2px solid black;
            background-color: white;
        }
        .simple-input {
            border: 2px solid black;
            background-color: white;
            font-family: 'JetBrains Mono', monospace;
        }
        .simple-button {
            border: 2px solid black;
            background-color: white;
            transition: background-color 0.2s;
        }
        .simple-button:hover {
            background-color: #f3f4f6;
        }
    </style>
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="supabase-config.js"></script>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div class="simple-card p-8">
            <h1 class="text-2xl font-bold mb-8">Parental Consent Form</h1>
            <p class="text-sm mb-8"><strong>Required for users under 18 years of age</strong></p>

            <form id="consentForm" class="space-y-6">
                <section class="space-y-4">
                    <h2 class="text-xl font-bold">Minor Information</h2>
                    
                    <div>
                        <label for="minorName" class="block text-sm font-bold mb-2">Minor's Full Name:</label>
                        <input type="text" id="minorName" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="minorAge" class="block text-sm font-bold mb-2">Minor's Age:</label>
                        <input type="number" id="minorAge" required min="13" max="17" class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="minorEmail" class="block text-sm font-bold mb-2">Minor's Email:</label>
                        <input type="email" id="minorEmail" required class="w-full px-3 py-2 simple-input">
                    </div>
                </section>

                <section class="space-y-4">
                    <h2 class="text-xl font-bold">Parent/Guardian Information</h2>
                    
                    <div>
                        <label for="parentName" class="block text-sm font-bold mb-2">Parent/Guardian Full Name:</label>
                        <input type="text" id="parentName" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="parentEmail" class="block text-sm font-bold mb-2">Parent/Guardian Email:</label>
                        <input type="email" id="parentEmail" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="parentPhone" class="block text-sm font-bold mb-2">Parent/Guardian Phone:</label>
                        <input type="tel" id="parentPhone" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="relationship" class="block text-sm font-bold mb-2">Relationship to Minor:</label>
                        <select id="relationship" required class="w-full px-3 py-2 simple-input">
                            <option value="">Select relationship</option>
                            <option value="parent">Parent</option>
                            <option value="legal-guardian">Legal Guardian</option>
                        </select>
                    </div>
                </section>

                <section class="space-y-4">
                    <h2 class="text-xl font-bold">Consent & Acknowledgment</h2>
                    
                    <div class="space-y-4">
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent1" required class="mt-1">
                            <span class="text-sm">I am the parent/legal guardian of the above-named minor and have the legal authority to provide this consent.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent2" required class="mt-1">
                            <span class="text-sm">I give permission for my minor child to use the Homeless Founders platform to seek accommodation arrangements.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent3" required class="mt-1">
                            <span class="text-sm">I understand that Homeless Founders is a matching platform only and does not provide accommodation services directly.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent4" required class="mt-1">
                            <span class="text-sm">I acknowledge that I am solely responsible for supervising and approving all accommodation arrangements for my minor child.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent5" required class="mt-1">
                            <span class="text-sm">I will personally verify the safety, legality, and appropriateness of any accommodation before allowing my child to stay there.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent6" required class="mt-1">
                            <span class="text-sm">I understand that Homeless Founders accepts no liability for the safety, well-being, or experiences of users, including minors.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent7" required class="mt-1">
                            <span class="text-sm">I have read and agree to the Terms of Service and understand all risks involved.</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent8" required class="mt-1">
                            <span class="text-sm">I agree to indemnify and hold harmless Homeless Founders from any claims arising from my child's use of the platform.</span>
                        </label>
                    </div>
                </section>

                <section class="space-y-4">
                    <h2 class="text-xl font-bold">Emergency Contact</h2>
                    
                    <div>
                        <label for="emergencyName" class="block text-sm font-bold mb-2">Emergency Contact Name:</label>
                        <input type="text" id="emergencyName" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="emergencyPhone" class="block text-sm font-bold mb-2">Emergency Contact Phone:</label>
                        <input type="tel" id="emergencyPhone" required class="w-full px-3 py-2 simple-input">
                    </div>
                    
                    <div>
                        <label for="emergencyRelationship" class="block text-sm font-bold mb-2">Relationship to Minor:</label>
                        <input type="text" id="emergencyRelationship" required class="w-full px-3 py-2 simple-input" placeholder="e.g., Parent, Guardian, Relative">
                    </div>
                </section>

                <section class="space-y-4">
                    <h2 class="text-xl font-bold">Digital Signature</h2>
                    
                    <div>
                        <label for="digitalSignature" class="block text-sm font-bold mb-2">Type your full name as digital signature:</label>
                        <input type="text" id="digitalSignature" required class="w-full px-3 py-2 simple-input" placeholder="Your full legal name">
                    </div>
                    
                    <div>
                        <label for="signatureDate" class="block text-sm font-bold mb-2">Date:</label>
                        <input type="date" id="signatureDate" required class="w-full px-3 py-2 simple-input">
                    </div>
                </section>

                <div class="border-t-2 border-black pt-6">
                    <p class="text-sm font-bold mb-4">By submitting this form, I certify that all information provided is true and accurate, and I understand the legal implications of this consent.</p>
                    
                    <button type="submit" class="w-full simple-button py-3 px-4 font-mono font-bold">
                        Submit Parental Consent
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Set today's date as default
        document.getElementById('signatureDate').valueAsDate = new Date();
        
        document.getElementById('consentForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Validate digital signature matches parent name
            const parentName = document.getElementById('parentName').value;
            const signature = document.getElementById('digitalSignature').value;
            
            if (parentName.toLowerCase() !== signature.toLowerCase()) {
                alert('Digital signature must match the parent/guardian name exactly.');
                return;
            }
            
            // Generate consent confirmation
            const minorName = document.getElementById('minorName').value;
            const parentEmail = document.getElementById('parentEmail').value;
            
            alert(`Parental Consent Submitted Successfully!\n\nMinor: ${minorName}\nParent Email: ${parentEmail}\n\nA confirmation will be sent to the parent's email address.\n\nThe minor may now use the platform under parental supervision.`);
            
            // Collect additional form fields
            const minorAge = document.getElementById('minorAge').value;
            const minorEmail = document.getElementById('minorEmail').value;
            const parentPhone = document.getElementById('parentPhone').value;
            const relationship = document.getElementById('relationship').value;
            const emergencyName = document.getElementById('emergencyName').value;
            const emergencyPhone = document.getElementById('emergencyPhone').value;
            const emergencyRelationship = document.getElementById('emergencyRelationship').value;
            const signatureDate = document.getElementById('signatureDate').value;

            try {
                await SupabaseDB.createParentalConsent({
                    minor_name: minorName,
                    minor_age: minorAge,
                    minor_email: minorEmail,
                    parent_name: parentName,
                    parent_email: parentEmail,
                    parent_phone: parentPhone,
                    relationship,
                    emergency_name: emergencyName,
                    emergency_phone: emergencyPhone,
                    emergency_relationship: emergencyRelationship,
                    signature_date: signatureDate
                });

                alert(`Parental Consent Submitted Successfully!\n\nMinor: ${minorName}\nParent Email: ${parentEmail}\n\nA confirmation will be sent to the parent's email address.\n\nThe minor may now use the platform under parental supervision.`);
                this.reset();
            } catch (err) {
                console.error('Consent submission error:', err);
                alert('Error submitting consent form. Please try again.');
            }
        });
    </script>
</body>
</html>
